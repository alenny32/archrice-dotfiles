#!/usr/bin/env sh

# Umar's config for shell aliases

chusr="sudo"

# Commands that are too long. Abbreviate them!
alias \
    sued="sudoedit" \
    fetch="fastfetch" \
    sdn="shutdown now" \
    hibernate="systemctl hibernate" \
    so="source" \
    soz="source $XDG_CONFIG_HOME/zsh/.zshrc" \
    soa="source $XDG_CONFIG_HOME/shell/aliasrc" \
    ssl="lfcd $HOME/.local/bin/" \
    loc="locate" \
    bt="bluetoothctl" \
    SS="$chusr systemctl"
    # ss="cd $HOME/.local/bin; ls" \

# Git alias
alias \
    g="git" \
    gcl="git clone" \
    gst="git status" \
    gch="git checkout" \
    gb="git branch" \
    gnb="git checkout -b" \
    ga="git add" \
    gc="git commit" \
    gcm="git commit -m" \
    gca="git commit -a" \
    gcd="git commit --amend" \
    gcaa="git commit --amend -a" \
    gcam="git commit -am" \
    gcaam="git commit --amend -am" \
    gd="git diff" \
    gf="git fetch" \
    gp="git push" \
    gm="git merge" \
    gpl="git pull" \
    gl="git log" \
    glo="git log --oneline" \
    glg="git log --graph --abbrev-commit --decorate --format=format:'%C(bold green)%h%C(reset) - %C(bold cyan)%aD%C(reset) %C(bold yellow)(%ar)%C(reset)%C(auto)%d%C(reset)%n''          %C(white)%s%C(reset) %C(dim white)- %an%C(reset)' --all" \

# Make alias:
alias \
    makecl="make clean" \
    makein="$chusr make clean install" \
    makeun="$chusr make clean uninstall" \
    remake="$chusr make clean uninstall; $chusr make clean install" \

# Config editing:
    # Shortcuts are generated by `shortcuts` script
    # which are stored in shortcutrc
alias cdd="clear -x; cd $HOME/.dotfiles; git status"

# Use neovim for vi if present.
[ -x "$(command -v nvim)" ] &&
    alias vi="nvim" vimdiff="nvim -d"

# Use $XINITRC variable if file exists.
[ -f "$XINITRC" ] &&
    alias startx="startx $XINITRC"

ss() { cd ~/.local/bin; $EDITOR $(fzf) ;}

# Verbosity and settings that you pretty much just always are going to want.
alias \
    cp="cp -Liv" \
    mv="mv -iv" \
    rm="rm -vI" \
    th="trash-put -v" \
    bc="bc -ql" \
    mkd="mkdir -pv" \
    df="df -h" \
    du="du -h" \
    yt="yt-dlp --embed-metadata -i" \
    yta="yt -x -f bestaudio/best" \
    wgetp="wget -crkp -np -nv -nH -R 'index.html' --show-progress" \
    wget="wget -crk -np -nv -nH -R 'index.html' --show-progress" \
    ffmpeg="ffmpeg -hide_banner" \

# Colorize commands when possible.
alias \
    grep="grep --color=auto" \
    diff="diff --color=auto" \
    ccat="highlight --out-format=ansi" \
    ip="ip -color=auto" \

# Use eza instead of ls if installed
alias ll="ls -l"
if [ -n "$(command -v eza)" ]; then
    alias la="ls -a"
    alias lla="ls -al"
    alias lsd="ls -D"
    alias ls="eza -h --icons --color=auto --group-directories-first"
else
    alias la="ls -A"
    alias lla="ls -Al"
    alias lsd="ls -d"
    alias ls="ls -hN --color=auto --group-directories-first"
fi

# Sudo / doas not required for some system commands
for command in downgrade apt nala mount umount sv pacman updatedb su shutdown poweroff reboot; do
    alias $command="$chusr $command"
done; unset command

# Pacman package manager.
alias \
    pin="pacman -S" \
    pup="pacman -Syu" \
    pss="pacman -Ss" \
    pq="pacman -Q" \
    pqs="pacman -Qs" \
    pqq="pacman -Qq" \
    prm="pacman -R" \
    prns="pacman -Rns" \
    pf="pacman -F" \
    pfy="pacman -Fy" \
    pfx="pacman -Fx" \
    pfyx="pacman -Fyx" \

# Apt package manager.
alias \
    aptupd="apt update" \
    aptupg="apt upgrade" \
    aptupdg="apt update; apt upgrade" \
    aptin="apt install" \
    aptrm="apt remove" \
    aptpg="apt purge" \
    apts="apt search" \

# Nala package manager.
alias \
    nlupd="nala update" \
    nlupg="nala upgrade" \
    nlupdg="nala update; nala upgrade" \
    nlin="nala install" \
    nlrm="nala remove" \
    nlpg="nala purge" \
    nls="nala search" \

# Nix package manager.
nixin() { for pkg in $@; do; nix-env -iA nixpkgs.$pkg; done }
alias \
    nixlsp="nix-env -q" \
    nixun="nix-env -e" \
    nixrm="nix-env -e" \
    nixup="nix-env -u" \
    nixhold="nix-env --set-flag keep true" \
    nixlsg="nix-env --list-generations" \
    nixrmg="nix-env --delete-generations" \
    nixrb="nix-env --rollback" \
    nixsw="nix-env --switch-generation" \
    nixgc="nix-store --gc" \
    nixgcdry="nix-store --gc --print-dead" \
    nixcol="nix-collect-garbage" \

# These common commands are just too long! Abbreviate them.
alias \
    ka="killall" \
    trem="transmission-remote" \
    YT="youtube-viewer" \
    sdn="shutdown -h now" \
    e="$EDITOR" \
    v="$VISUAL" \
    b="bat" \
    p="pacman" \
    xi="$chusr xbps-install" \
    xr="$chusr xbps-remove -R" \
    xq="xbps-query" \
    z="devour zathura" \
    tess="tesseract -l eng" \
    tessi="tesseract -l ind" \
    tessj="tesseract -l jpn" \
    tessjv="tesseract -l jpn_vert" \
    gpt="tgpt" \
    nvmu="nvm use" \
    nvmd="nvm deactivate" \
    nvml="nvm ls" \
    nvmi="nvm install" \
    nvmun="nvm uninstall" \
    nvmup="nvm install node --reinstall-packages-from=current" \

alias \
    lf="lfub" \
    magit="$EDITOR -c MagitOnly" \
    ref="shortcuts >/dev/null; \
        source ${XDG_CONFIG_HOME:-$HOME/.config}/shell/shortcutrc; \
        source ${XDG_CONFIG_HOME:-$HOME/.config}/shell/zshnameddirrc" \
    weath="less -S ${XDG_CACHE_HOME:-$HOME/.cache}/weatherreport" \

# Apps
alias \
    keychain="keychain --dir $XDG_RUNTIME_DIR/keychain --absolute" \
    sshk="keychain $HOME/.ssh/id_ed25519; source $XDG_RUNTIME_DIR/keychain/$(hostname)-sh" \
    walbg="wal -n -i $XDG_DATA_HOME/bg" \
    walr="wal -R" \
    dmenu='dmenu -i -nb "#0b060a" -nf "#f77416" -sb "#f77416" -sf "#0b060a"' \
    dmenu_run='dmenu_run -i -nb "#0b060a" -nf "#f77416" -sb "#f77416" -sf "#0b060a"' \
    dm='dmenu' \
    dr='dmenu_run' \

# Window swallowing using devour
# install devour from (https://github.com/salman-abedin/devour)
alias \
    mpv="devour mpv" \
    sxiv="devour sxiv -a" \
    nsxiv="devour nsxiv -a" \
    zathura="devour zathura" \
    lowriter="devour lowriter" \
    localc="devour localc" \
    loimpress="devour loimpress" \
    lodraw="devour lodraw" \
    lomath="devour lomath" \
    lobase="devour lobase" \
