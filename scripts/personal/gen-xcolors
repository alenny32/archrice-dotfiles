#!/bin/sh

# Script to generate color variables based on xresources.

file_name="xcolors"
save_path="${XDG_DATA_HOME:-$HOME/.local/share}"
full_path="$save_path/$file_name"

# xresources_path="$HOME/.Xresources"
xresources_path="$HOME/.config/x11/xresources"

# get xresources colors
get_color() {
   sed -n '/^!!.*:$/I, /!!/p' "${xresources_path}" | sed -n '/color0/, /color15/p' | grep "$1:" | awk '{print $2}'
}

# boilerplate
printf "#!/bin/sh\n\n" > "${full_path}"
printf "# Xresources colors generated by gen-xcolors\n" >> "${full_path}"
printf "# Generated at %s\n\n" "$(date)" >> "${full_path}"

# generate colors
for i in $(seq 0 15) ; do
    echo "color${i}=\"$(get_color "color${i}")\"" >> "${full_path}"
done
